<html>
    <head>
    <script type="text/javascript" src="../modules/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="../modules/functions.js"></script>
    <link href="../modules/style.css" rel="stylesheet" type="text/css" />
    <title>Cadastro</title>
    <style>
        .erro {
            color: red;
            font-size: 0.9em;
            margin-top: 5px;
            margin-bottom: 10px;
        }
    </style>
</head>

    <body>
        <div class="containerCenterForm">
            <div class="shadow-boxForm">
                <div style="padding-top: 2%; max-width: 200px;">
                    <form method="POST" action="controller/usuario.php" enctype="multipart/form-data">
                        <input type="hidden" name="Usuario" value="Cadastrar" />
                        <input type="text" name="Login" placeholder="Usuario" required /><br/>
                        <input type="text" name="Nome" placeholder="Nome" required /><br/>

                        <input type="password" autocomplete="new-password" name="Senha" placeholder="Senha" required /><br/>
                        <input type="password" autocomplete="new-password" name="Confirmar" placeholder="Confirmar senha" required /><br/>
                        <div id="erro-senha" class="erro"></div>

                        <input type="file" name="foto" /><br/><br/>

                        <div style="display: flex; justify-content: space-between;">
                            <a href="index.php">
                                <button type="button">Voltar</button>
                            </a>
                            <button type="submit" name="cadastrar" onclick="return ValidadoresDeSenhas();">Cadastrar</button>
                        </div>
                    </form>

                    <p style="color:red">Data too long for column 'Login' at row 1</p>                </div>
            </div>
        </div>

        <!-- ðŸ”½ JS direto no arquivo -->
        <script>
        function ValidadoresDeSenhas() {
            var senha = $('input[name="Senha"]').val();
            var confirmar = $('input[name="Confirmar"]').val();
            var errosSenha = [];

            // Limpa mensagens anteriores
            $('#erro-senha').html('');

            // Regras de senha
            if (senha.length < 8) errosSenha.push("A senha deve ter pelo menos 8 caracteres.");
            if (!/[A-Z]/.test(senha)) errosSenha.push("A senha deve conter pelo menos uma letra maiÃºscula.");
            if (!/[a-z]/.test(senha)) errosSenha.push("A senha deve conter pelo menos uma letra minÃºscula.");
            if (!/\d/.test(senha)) errosSenha.push("A senha deve conter pelo menos um nÃºmero.");
            if (!/[\W_]/.test(senha)) errosSenha.push("A senha deve conter pelo menos um caractere especial.");

            // Verifica se as senhas coincidem
            if (senha !== confirmar) errosSenha.push("As senhas devem ser iguais!");

            // Mostra erros no formulÃ¡rio
            if (errosSenha.length > 0) {
                $('#erro-senha').html(errosSenha.join('<br>'));
                return false; // impede envio
            }

            return true; // permite envio
        }
        </script>
    </body>
</html>
